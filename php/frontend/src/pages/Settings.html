<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cyber - Settings</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Source+Sans+3:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../assets/styles/app.css" />
</head>
<body class="page">
  <div class="app-shell">
    <aside class="sidebar">
      <h3>Cyber</h3>
      <div class="sidebar__user">
        <div class="avatar avatar--sm" data-user-avatar></div>
        <div>
          <div class="sidebar__user-name" data-user-name>Loading...</div>
          <div class="sidebar__user-handle" data-user-handle>@you</div>
        </div>
      </div>
      <nav>
        <a href="Feed.html">Feed</a>
        <a href="Chat.html">Chat</a>
        <a href="Profile.html">Profile</a>
        <a href="Admin.html">Admin</a>
        <a class="active" href="Settings.html">Settings</a>
        <a href="Login.html" data-logout>Logout</a>
      </nav>
    </aside>

    <main>
      <div class="topbar">
        <div class="topbar__search">Account settings</div>
      </div>

      <section class="card" style="margin-bottom:20px;">
        <h3>Account</h3>
        <form id="accountForm" class="form-grid" style="margin-top:16px;">
          <label class="label" for="settingsName">Name</label>
          <input class="input" id="settingsName" name="name" />
          <label class="label" for="settingsBio">Bio</label>
          <textarea class="input" id="settingsBio" name="bio" rows="3"></textarea>
          <label class="label" for="settingsWebsite">Website</label>
          <input class="input" id="settingsWebsite" name="website" />
          <label class="label" for="settingsAvatar">Avatar URL</label>
          <input class="input" id="settingsAvatar" name="avatar_url" />
          <label class="label" for="settingsCover">Cover photo URL</label>
          <input class="input" id="settingsCover" name="cover_photo_url" />
          <label class="label" for="settingsAvatarFile">Upload avatar</label>
          <input class="input" id="settingsAvatarFile" name="avatar_file" type="file" accept="image/*" />
          <label class="label" for="settingsCoverFile">Upload cover photo</label>
          <input class="input" id="settingsCoverFile" name="cover_file" type="file" accept="image/*" />
          <button class="btn btn--primary" type="submit">Save account</button>
          <div id="accountStatus"></div>
        </form>
      </section>

      <section class="card" style="margin-bottom:20px;">
        <h3>Change email / username</h3>
        <form id="changeForm" class="form-grid" style="margin-top:16px;">
          <label class="label" for="changeEmail">New email</label>
          <input class="input" id="changeEmail" name="changeEmail" type="email" placeholder="new@email.com" />
          <label class="label" for="changeUsername">New username</label>
          <input class="input" id="changeUsername" name="changeUsername" type="text" placeholder="newusername" />
          <button class="btn btn--primary" type="submit">Request change</button>
          <div id="changeStatus"></div>
        </form>
      </section>

      <section class="card" style="margin-bottom:20px;">
        <h3>Privacy</h3>
        <label style="display:flex; align-items:center; gap:10px;">
          <input type="checkbox" id="settingsPrivate" /> Private account
        </label>
        <label style="display:flex; align-items:center; gap:10px; margin-top:10px;">
          <input type="checkbox" id="settingsHideReads" /> Hide read receipts
        </label>
        <label style="display:flex; align-items:center; gap:10px; margin-top:10px;">
          <input type="checkbox" id="settingsHideTyping" /> Hide typing indicator
        </label>
        <label style="display:flex; align-items:center; gap:10px; margin-top:10px;">
          <input type="checkbox" id="settingsPrivateMode" /> Private mode (no forwarding)
        </label>
        <label style="display:flex; align-items:center; gap:10px; margin-top:10px;">
          <input type="checkbox" id="settingsFocusMode" /> Focus mode (quiet hours)
        </label>
        <label class="label" for="settingsDmPrivacy" style="display:block; margin-top:12px;">Who can DM me</label>
        <select id="settingsDmPrivacy" class="input" style="margin-top:8px;">
          <option value="everyone">Everyone</option>
          <option value="friends">Friends only</option>
          <option value="nobody">Nobody</option>
        </select>
        <label style="display:flex; align-items:center; gap:10px; margin-top:10px;">
          <input type="checkbox" id="settingsShowOnline" /> Show online status
        </label>
        <button class="btn btn--ghost" id="privacySave" style="margin-top:12px;">Save privacy</button>
      </section>

      <section class="card" style="margin-bottom:20px;">
        <h3>Notifications</h3>
        <div class="form-grid" style="margin-top:16px;">
          <label><input type="checkbox" id="notifyLike" /> Likes</label>
          <label><input type="checkbox" id="notifyComment" /> Comments</label>
          <label><input type="checkbox" id="notifyFollow" /> Follows</label>
          <label><input type="checkbox" id="notifyMessage" /> Messages</label>
          <label><input type="checkbox" id="notifyFriend" /> Friend requests</label>
        </div>
        <button class="btn btn--ghost" id="notifySave" style="margin-top:12px;">Save notifications</button>
      </section>

      <section class="card" style="margin-bottom:20px;">
        <h3>Appearance</h3>
        <label class="label" for="settingsThemeMode">Theme</label>
        <select id="settingsThemeMode" class="input" style="margin-top:8px;">
          <option value="light">Light</option>
          <option value="dark">Dark</option>
          <option value="sunset">Sunset</option>
          <option value="midnight">Midnight</option>
        </select>
        <div class="theme-chips" style="margin-top:10px;">
          <span class="theme-chip theme-chip--light">Light</span>
          <span class="theme-chip theme-chip--dark">Dark</span>
          <span class="theme-chip theme-chip--sunset">Sunset</span>
          <span class="theme-chip theme-chip--midnight">Midnight</span>
        </div>
        <button class="btn btn--ghost" id="appearanceSave" style="margin-top:12px;">Save appearance</button>
      </section>

      <section class="card" style="margin-bottom:20px;">
        <h3>Security</h3>
        <form id="passwordForm" class="form-grid" style="margin-top:16px;">
          <label class="label" for="currentPassword">Current password</label>
          <input class="input" id="currentPassword" name="currentPassword" type="password" autocomplete="current-password" />
          <label class="label" for="newPassword">New password</label>
          <input class="input" id="newPassword" name="newPassword" type="password" autocomplete="new-password" />
          <label class="label" for="confirmPassword">Confirm new password</label>
          <input class="input" id="confirmPassword" name="confirmPassword" type="password" autocomplete="new-password" />
          <button class="btn btn--accent" type="submit">Change password</button>
          <div id="passwordStatus"></div>
        </form>
      </section>

      <section class="card" style="margin-bottom:20px;">
        <h3>Active sessions</h3>
        <div id="sessionsList" style="margin-top:12px;"></div>
      </section>

      <section class="card" style="margin-bottom:20px;">
        <h3>Blocked users</h3>
        <div id="blockedUsersList" style="margin-top:12px;"></div>
      </section>

    </main>
  </div>

  <script>
    window.CYBER_CONFIG = {
      apiBaseUrl: 'http://localhost/cyber/php/backend/public/index.php/api',
      pusherKey: 'PUSHER_KEY',
      pusherCluster: 'mt1'
    };
  </script>
  <script src="../js/api.js"></script>
  <script src="../js/auth.js"></script>
  <script src="../js/app.js"></script>
  <script src="../js/settings.js"></script>
  <script>
    window.SettingsPage.init();
  </script>
</body>
</html>
